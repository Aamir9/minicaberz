@{
    ViewBag.Title = "Home Page";


    int UserSessionId = 0;

    if (Session["user"] != null)
    {
        UserSessionId = int.Parse(Session["user"].ToString());


    }



}



<div id="formMain">




    <div class="formBody" >

        <form method="post" id="distanceform" action="/JobBooking/booking">


            <div class="d-flex flex-column" >
           
        

                <!--flex box of startr-->

                <div class="d-flex flex-row" >

                    <div class="pick">
                        <input type="hidden" id="origin" name="origin" />
                        <input type="hidden" name="jobType" id="jobType" />
                        <input type="hidden" name="passengerId" id="passengerId" />
                        <input type="hidden" name="selectedcar" id="selectedcar" />
                        <input type="hidden" id="searchTextField" placeholder="enter the informtion">
                        <input type="text" name="pickUp" id="from_places" placeholder="Pick Up Address" class="form-control" />

                        <p class="text-danger" id="inputError1"> </p>
                    </div>

                    @*<div>
                        <div class="" id="via" style="display:none;">
                            <span>  <i class="fas fa-plus-square"></i></span>
                        </div>

                    </div>*@




                    <div class="Drop">
                        <input id="destination" name="destination" required="" type="hidden" />
                        <input type="text" id="to_places" name="" placeholder="Drop Off Address" class="form-control" />


                        <p class="text-danger" id="inputError2"> </p>
                    </div>



                        <div class="form-group carTypeMain">
                            <select class="form-control" id="cartype" name="cartype">

                                <option value="">Car Type</option>
                                <option value="Saloon">Saloon</option>
                                <option value="Estate">Estate</option>
                                <option value="MPV">MPV</option>

                            </select>
                            <p class="text-danger errormsg"></p>
                        </div>

                        <div class="bookmain">
                            <div class="text-center">
                                <input type="button" class="btn btn-block  getquotebtn" id="GetQuote" style=" background: #ff0000;color:white;" value="Get Quote Now " />
                            </div>
                            <div class="text-center">
                                <input type="submit" class="btn btn-block  getquotebtn" id="BookNow" style="background: #ff0000;color:white; display:none;" value="Book Now " />
                            </div>

                            <div class="text-center">

                                <a href="#showLogin" id="LoginPopShow" style="display:none;text-decoration:none;">

                                    <input type="button" class="btn btn-block  getquotebtn" style=" background: #ff0000;color:white;" value="Book now" />
                                </a>
                            </div>
                        </div>

                   
                </div>
                <!--end  form  quote flex box-->
                <div  id="priceMileMain" style="display:none;">

                    <div class="d-flex flex-row " id="pdm">
                        <div class="priceMilie">
                            <div class="PriceMileInnerStyling">
                                <p class="" id="in_mile" name="in_mile"></p>
                                <span style="display:none;" id="inmile"></span>

                                <input type="hidden" name="inMiles" id="inMiles" />
                            </div>


                        </div>

                        <div class="priceMilie">
                            <div class="PriceMileInnerStyling">
                                <span class="pricebadge font-weight-600" id="Price">
                                    Fare: &nbsp;&nbsp;  <i class="fas fa-pound-sign"></i> &nbsp;
                                    <span  id="Prices"></span>
                                </span>
                                <input type="hidden" name="price" id="price" />
                                <i class="fa fa-spinner fa-spin" style="display:none;"></i>
                            </div>
                        </div>

                        <div class="priceMilie">
                            <div class="PriceMileInnerStyling">
                                <p class="d" id="duration_text">  </p>
                            </div>
                        </div>

                        <div class="priceMilie">
                            <div class="PriceMileInnerStyling">
                                 <i class="far fa-handshake  text-blue" style="font-size:30px;"></i> 
                            </div>
                        </div>



                    </div>

                </div>

            </div><!--end form  quote flex box-->

        </form>



    </div>

</div>


<!--//Job Form-->

<div class="banner" id="home">

    <div id="wrapper">

        <!-- Slideshow 1 -->
        <div class="rslides_container">
            <ul class="rslides" id="slider1">
                <li>
                    <div class="banner-img">
                        <div class="bs-slider-overlay ">
                            <div class="banner-info  text-center">

                                <h4> <i>Call</i> 020 88020888 </h4>
                                <h6 style="color:white;">From any where any time 24/7</h6>


                            </div>

                        </div>
                    </div>
                </li>
                <li>
                    <div class="banner-img one">
                        <div class="bs-slider-overlay">
                            <div class="banner-info text-center">
                                <h4>Top Services in London </h4>
                                <h6 style="color:white;">For All Booking </h6>



                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="banner-img two">
                        <div class="bs-slider-overlay">
                            <div class="banner-info text-center">

                                <h4>Reach Your Destination</h4>
                                <h6 style="color:white;">From all London airports  to London  & across the UK</h6>


                            </div>
                        </div>
                    </div>
                </li>


            </ul>
        </div>
    </div>
</div>
<!-- //banner -->
<!-- about -->
<section class="about aboutHome">

    <div class="container-fluid">

        <div class="text-center " style="display:none;">
            <div class="aboutlogo">
                <img src="~/images/logo.png" class="img-fluid " />

            </div>
            <div class="row mt-md-5" id="abouttextAndvideo">

                <div class="col-lg-6 col-md-12 leftdiv">
                    <p class="lead text-justify pmain">
                        Thank you for visiting our website that provides you with our Heathrow Airport transfer quotation and booking interface. We specialize in airport taxi transfers to and from Heathrow Airport for both individuals and groups, with the accent on a courteous, professional and personal service at affordable prices.



                    </p>
                    <p class="lead text-justify pmain">
                        We provide access to a large fleet of vehicle sizes and types. Regardless of your party size, luggage or special requirements, we can usually provide the perfect vehicle.
                    </p>
                </div>

                <div class="col-lg-6 col-md-12 leftdiv">
                    <div class="rightdiv">

                        <div class="embed-responsive embed-responsive-16by9 polaroid">
                            <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/ezuKIzXJuz8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


                        </div>

                        <p class="lead text-justify  pmain">
                            The staff & drivers who work with The Heathrow airports cars, are always the secret of our success,
                            their continued effort & hard work, ensures your experience with us is unforgettable.
                        </p>
                    </div>
                </div>
            </div>

        </div>



        <div class="about-head text-center">
            <h3 class="heading text-capitalize text-center">Why Use Minicaberz</h3>
            <div class="row about-grids-top mb-5 ">
                <div class="col-lg-4 col-sm-4 col-4  mt-5 about-grid p-0 ">


                    <i class="fas fa-plane" aria-hidden="true" style="color:#b200ff;"></i>
                    <h4>All AirPorts</h4>

                </div>
                <div class="col-lg-4 col-sm-4 col-4 mt-5 about-grid p-0">
                    <i class="fas fa-cubes"></i>

                    <h4>Astonishing Cheap</h4>
                </div>
                <div class="col-lg-4 col-sm-4 col-4  mt-5 about-grid p-0">
                    <i class="fas fa-thumbs-up" aria-hidden="true" style="color:#808080;"></i>
                    <h4>Fixed fares</h4>
                </div>
            </div>
            <div class="row about-grids-top mb-5">
                <div class="col-lg-4 col-sm-4 col-4 mt-lg-0 mt-5 about-grid p-0">
                    <i class="fas fa-clock" aria-hidden="true" style="color:#0094ff;"></i>

                    <h4>30 mins free waiting</h4>
                </div>
                <div class="col-lg-4 col-sm-4 col-4 mt-lg-0 mt-5 about-grid p-0">
                    <i class="fa fa-train" aria-hidden="true"></i>
                    <h4>All Stations</h4>
                </div>
                <div class="col-lg-4 col-sm-4 col-4 mt-lg-0  about-grid p-0 ">
                    <i class="fas fa-boxes" aria-hidden="true" style="color:#00ff21;"></i>
                    <h4>Pay your way</h4>
                </div>
            </div>

            <div class="row about-grids-top mb-5">
                <div class="col-lg-4 col-sm-4 col-4 mt-lg-0 mt-5 about-grid p-0">
                    <i class="fas fa-handshake" aria-hidden="true" style="color:#ff00dc;"></i>
                    <h4>Trusted & reliable</h4>

                </div>
                <div class="col-lg-4 col-sm-4 col-4 mt-lg-0 mt-5 about-grid p-0">
                    <i class="fa fa-utensils" aria-hidden="true" style="color:#ffd800"></i>
                    <h4>Restaurants</h4>
                </div>
                <div class="col-lg-4 col-sm-4 col-4 mt-lg-0 mt-5 about-grid p-0">
                    <i class="fa fa-car" aria-hidden="true" style="color:red;"></i>

                    <h4>Weddings</h4>
                </div>
            </div>

        </div>


    </div>
</section>
<!-- //about -->
<!-- Our prices -->
<section class="prices py-5">
    <div class="d-flex justify-content-center  quote ">

        <div class="booking text-center p-sm-5 py-5 px-3">
            <h3 class="heading text-capitalize text-center">Be a MiniCaber</h3>
            <p class="my-4">Raliable Minicab Service </p>
            <a href="@Url.Action("CabOfficeReg", "CabOffice")" class="btn btn-lg">Register</a>
        </div>
    </div>





</section>
<!-- //Our prices -->
<!--login box-->
<div id="showLogin" style="display:none;">
    <div class="container">
        <div class="row">
            <div class="col-md-12 alert alert-info">
                <h3 class="text-center">Login</h3>
                <form id="loginForm">
                    <div id="msg"><ul style="color:red;"> Invalid Username Or Password</ul></div>
                    <div class="form-group">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                            <input class="form-control" type="email" name="Email" id="logEmail" placeholder="Email" />
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            <input class="form-control" type="password" name="Password" id="logPssword" placeholder="Password" />
                        </div>
                    </div>
                </form>
                <div class="form-group">
                    <button class="btn btn-info form-control" type="submit" onclick="Login()"><i class="glyphicon glyphicon-log-in"></i> Login</button>
                </div>
                <div class="form-group">
                    @*<a style="float:left">Forget Password ? </a><a style="float:right;cursor:pointer" onclick="SignUp()"> Sign Up</a>*@
                    <a class="btn-link" href="@Url.Action("Registration","Passengers")" id="signUpPopShow"> Sign Up</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!--//login box-->








@section scripts{


    <script defer src="https://maps.googleapis.com/maps/api/js?libraries=places&language=en&callback=initMap&key=AIzaSyAUeFGwxXtr8M8SD82BbA-6857CVPKUhNo" type="text/javascript"></script>
    <script>
        function initMap() {

            var input = document.getElementById('searchTextField');

            autocomplete = new google.maps.places.Autocomplete(input);
        }
    </script>

    <script>
        var distance_in_mile
        var Login;
        var passengerId;



        $(function () {
            $("#from_places, #to_places").on('focus', function () {

                $('.pac-container').css('margin-top', '-50px');

            });

            // add input listeners
            google.maps.event.addDomListener(window, 'load', function () {

                var fromPlaces = document.getElementById('from_places');
                var toPlaces = document.getElementById('to_places')
                var from_places = new google.maps.places.Autocomplete(fromPlaces);
                var to_places = new google.maps.places.Autocomplete(toPlaces);

                function fromPlacesfunc() {
                    var from_place = from_places.getPlace();
                    var from_address = from_place.formatted_address;
                    $('#origin').val(from_address);

                }
                function toPlacesfunc() {
                    var to_place = to_places.getPlace();
                    var to_address = to_place.formatted_address;
                    $('#destination').val(to_address);

                }

                google.maps.event.addListener(from_places, 'place_changed', fromPlacesfunc);
                google.maps.event.addListener(to_places, 'place_changed', toPlacesfunc);

            });
            // calculate distance
            function calculateDistance() {
                var origin = $('#origin').val();
                var destination = $('#destination').val();
                var service = new google.maps.DistanceMatrixService();
                service.getDistanceMatrix(
                    {
                        origins: [origin],
                        destinations: [destination],
                        travelMode: google.maps.TravelMode.DRIVING,
                        unitSystem: google.maps.UnitSystem.IMPERIAL, // miles and feet.
                        // unitSystem: google.maps.UnitSystem.metric, // kilometers and meters.
                        avoidHighways: false,
                        avoidTolls: false
                    }, callback);
            }
            // get distance results
            function callback(response, status) {
                if (status != google.maps.DistanceMatrixStatus.OK) {
                    $('#result').html(err);

                } else {

                    var origin = response.originAddresses[0];
                    var destination = response.destinationAddresses[0];
                    if (response.rows[0].elements[0].status === "ZERO_RESULTS") {

                        $('#result').html("Better get on a plane. There are no roads between " + origin + " and " + destination);
                    } else {


                        var distance = response.rows[0].elements[0].distance;
                        var duration = response.rows[0].elements[0].duration;
                        console.log(response.rows[0].elements[0].distance);
                        console.log(response.rows[0].elements[0].duration);
                        var distance_in_kilo = distance.value / 1000; // the kilom
                        distance_in_mile = distance.value / 1609.34; // the mile

                        var duration_text = duration.text;
                        console.log(duration_text);
                        var duration_value = duration.value;
                        console.log(duration_value);

                        $('#in_mile').html(distance_in_mile.toFixed(0) + '&nbsp;Miles');
                        $('#inMiles').val(distance_in_mile.toFixed(0));
                        $('#inmile').text(distance_in_mile.toFixed(0));

                        $('#in_kilo').text(distance_in_kilo.toFixed(0));
                        $('#duration_text').html('Duration:&nbsp;' + duration_text);
                        $('#duration_value').text(duration_value);
                        $('#from').text(origin);
                        $('#to').text(destination);


                        var m = distance_in_mile.toFixed(0);
                        //var mile = parseInt(m);
                        $('.fa-spin').show();
                        $.ajax({
                            type: "POST",
                            url: '/Home/getPrice',
                            data: { 'value': m, cartype: $('#cartype').val() },
                            dataType: 'json',
                            cache: false,
                            success: function (data) {
                                // $('#textAmount').val(data.doubleValue);
                                console.log(data.totalAmount);

                                $('#Price').css('display', 'block');

                                $('#Prices').html(data.totalAmount);
                                $("#price").val(data.totalAmount);
                                console.log("your data submited successfull ");
                            },
                            error: function () {

                                console.log('error occure when you sending ajax request');
                            },

                            complete: function () {
                                $('.fa-spin').hide();
                            }
                        });

                        return false;

                    }
                }
            }
            // print results on submit the form

            //$('#distanceform').submit(function (e) {
            //   e.preventDefault();



        //    });
            // submitted form


            var way
            $('#slectoption').on('change', function () {

                way = $(this);

                if (way.val() == 'return') {
                    $('#returndiv').show();
                    $('#datepicker2,#timepicker2').prop('required', true);
                }
                else {
                    $('#returndiv').hide();
                    $('#datepicker2,#timepicker2').prop('required', false);
                }
            });


            var hour;
            $('#hours').on('change', function () {

                hour = $(this);

            });

            var cartype;
            $('#cartype').on('change', function () {

                cartype = $(this);
                var car = $(this).children(":selected").val();

                if (cartype == '') {

                    $('.errormsg').html('please select the car type');

                    cartype = undefined;
                    return false;
                }
                else {
                    $('.errormsg').html('');

                    $("#selectedcar").val(car);
                }

                console.log(car);


               // console.log($("#cartype").val(car))



            });

            var picUpPostCode;
            $('#PostCodeSelect2').on('change', function () {

                picUpPostCode = $(this);

                var postcodetext1 = $('#PostCodeSelect2 :selected').text();

                $('#postcode_1').val(postcodetext1);
            });

            var dropOffPostCode;
            $('#PostCode2Select2').on('change', function () {

                dropOffPostCode = $(this);
                var postcodetext2 = $('#PostCode2Select2 :selected').text();

                $('#postcode_2').val(postcodetext2);

            });



            $('#GetQuote').click(function (e) {




                    $('#jobType').val('Distance');
                    $("#hourError").html('');
                    console.log("getting price by distance");
                    if ($('#from_places').val() == '') {
                        $('#inputError1').html('Please enter your pick up address');

                        return false;
                    }
                    else if ($('#to_places').val() == '') {
                        $('#inputError2').html('Please enter your drop off address');

                        return false;
                    }

                    else if (cartype == undefined) {
                        $('.errormsg').html('please select the car type');
                        return false;
                    }


                    else {
                        $('.errormsg').html('');
                        $('#inputError1').html('');
                        $('#inputError2').html('');
                        $('#datepicker,#timepicker').prop('required', true);


                        e.preventDefault();
                        calculateDistance();
                        $('#GetQuote').hide();

                      //  $('#BookNow').show();
                        $('#priceMileMain').show();
                        $('#from_places,#to_places,#cartype').attr('disabled', 'disabled');



                    }


                $("#signUpPopShow").click(function () {

                    $("#showLogin").hide();
                    $(this).fancybox.close();
                    $("#showPassengerRegister").show();
                    $("#showPassengerRegister").fancybox();

                });




                var sessionId = @UserSessionId;

                    if (sessionId == 0) {
                     //   $("#BookNow").hide();
                        $("#LoginPopShow").show();
                        $("#LoginPopShow").fancybox();

                        $("#msg").hide();

                        Login = function () {
                            // var data = $("#loginForm").serialize();
                            $.ajax({
                                type: "post",
                                url: "/Home/CheckValidUser",
                                data: { email: $('#logEmail').val(), password: $('#logPssword').val() },
                                success: function (Data) {
                                    if (Data.result == "Fail") {
                                        $("#loginForm")[0].reset();
                                        $("#msg").show();
                                    }

                                    else {
                                        //window.location.href = "/Register/AfterLogin";
                                        sessionId = Data.sessionId;
                                        console.log("login sccessfull");
                                        $("#msg").hide();
                                        $("#LoginPopShow").hide();
                                        $.fancybox.close();
                                        $("#passengerId").val(sessionId);
                                        $("#BookNow").show();
                                         console.log(sessionId);
                                    }
                                },
                                error: function () {
                                    console.log('login request creating problem problem');


                                }


                            })
                        }
                       // return false;
                    } // for checking sessio id
                    else {

                            $("#passengerId").val(sessionId);
                            $("#BookNow").show();


                    }


            });


        });
    </script>

    @* //for get price and mile using google map*@




    <script type="text/javascript">

        $('.dhf,#refreshForm').on('click', function () {
            $('#formMain').find("input,select").not("input[type=button],#datepicker,.timepicker,#BookNow,#LoginPopShow").val('');

            $('#in_mile,#duration_text,#Prices').html('');
            $('#Price').css('display', 'none');
            $('#GetQuote').show();
            $('#BookNow').hide();
            $('#DriverMsg').hide();
            $('#from_places,#to_places,#cartype,#hours,#PostCodeSelect2,#PostCode2Select2').attr('disabled', false);
            $('#BookNow').hide();
            $("#LoginPopShow").hide();

            $("#PostCodeSelect2").select2({
                placeholder: "Select a Pick Up Postcode",
                allowClear: true

            });
            $("#PostCode2Select2 ").select2({
                placeholder: "Select Drop Off Postcode",
                allowClear: true

            });



        });

    </script>

    <!-- carousel -->
    <script src="~/js/owl.carousel.js"></script>
    <script>
        $(document).ready(function () {
            $('.owl-carousel').owlCarousel({
                loop: true,
                margin: 10,
                responsiveClass: true,
                responsive: {
                    0: {
                        items: 1,
                        nav: true
                    },
                    600: {
                        items: 1,
                        nav: false
                    },
                    900: {
                        items: 2,
                        nav: false
                    },
                    1000: {
                        items: 3,
                        nav: true,
                        loop: false,
                        margin: 20
                    }
                }
            })
        })
    </script>
    <!-- Calendar -->
    <script src="~/js/jquery-ui.js"></script>

    <!-- Time -->
    <script type="text/javascript" src="~/js/wickedpicker.js"></script>
    <script type="text/javascript">

        $('.timepicker,.timepicker2').wickedpicker({
            twentyFour: false,

        });
        var timepicker = $('.timepicker').wickedpicker();

        var getCurrentTime = timepicker.wickedpicker('time');
        $('.timepicker').val(getCurrentTime);

    </script>
    <!--// Time -->
    <script>
        $(function () {
            $("#datepicker,#datepicker1,#datepicker2,#datepicker3").datepicker({ dateFormat: 'dd/mm/yy' });

            $("#datepicker").datepicker().datepicker("setDate", new Date());

            $('.ui-datepicker').hide();

        });

    </script>

    <script>
        $(function () {
            $("#datepicker,#datepicker1,#datepicker2,#datepicker3").datepicker();

        });
    </script>
    <!-- //Calendar -->
    <!-- //carousel -->
    <!--slider-->

    <script src="~/js/responsiveslides.min.js"></script>
    <script>
        $(function () {
            // Slideshow 1
            $("#slider1").responsiveSlides({
                auto: true,
                pager: true,
                nav: true,
                speed: 900,
                namespace: "centered-btns"
            });
        });
    </script>
    <!--//slider-->
    <!-- start-smoth-scrolling -->
    <script src="~/js/SmoothScroll.min.js"></script>
    <script type="text/javascript" src="~/js/move-top.js"></script>
    <script type="text/javascript" src="~/js/easing.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function ($) {
            $(".scroll").click(function (event) {
                event.preventDefault();
                $('html,body').animate({ scrollTop: $(this.hash).offset().top }, 1000);
            });
        });
    </script>
    <!-- here stars scrolling icon -->
    <script type="text/javascript">
        $(document).ready(function () {






            $().UItoTop({ easingType: 'easeOutQuart' });

        });
    </script>

    @*booking form fields show and hide*@
    <script type="text/javascript">
        $(document).ready(function () {
            $('#mainDirection').hide();

            $('#PostCode2Select2 ,#PostCodeSelect2').select2({


            });


            $("#myBtn").click(function () {
                $("#myModal").modal();
            });

            $('.hourly').click(function () {
                $('#HourMain').show();
                $('#mainDirection').hide();
                $('#flateRates').hide();
                $('.pick').show();
                $('.Drop').hide();
                //$('#slectoption').val('oneWay');
                $('#slectoption').val('oneWay');

                $('#returndiv').hide();
            });
            $('.distance').click(function () {

                $('#HourMain').hide();
                $('#mainDirection').show();
                $('#flateRates').hide();
                $('.pick').show();
                $('.Drop').show();
            });

            $('.flateRate').click(function () {
                $('#HourMain').hide();
                $('#mainDirection').show();
                $('#flateRates').show();
                $('.pick').hide();
                $('.Drop').hide();
            })

        });
    </script>

    <script>

        // Add active class to the current button (highlight it)
        var header = document.getElementById("formHead");
        var btns = header.getElementsByClassName("dhf");
        for (var i = 0; i < btns.length; i++) {
            btns[i].addEventListener("click", function () {

                var current = document.getElementsByClassName("active");

                current[0].className = current[0].className.replace(" active", "");
                this.className += " active";
                //console.log(current[0]);

            });
        }

    </script>



}